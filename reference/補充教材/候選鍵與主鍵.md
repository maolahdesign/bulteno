# 候選鍵與主鍵的差別

候選鍵(Candidate Key)和主鍵(Primary Key)是資料庫設計中兩個密切相關但有明確區別的概念。下面解釋它們之間的主要差別：

## 定義差異

**候選鍵 (Candidate Key)**：
- 能夠唯一識別資料表中每一筆記錄的屬性或屬性組合
- 一個資料表可以有多個候選鍵
- 具有唯一性和最小性

**主鍵 (Primary Key)**：
- 從候選鍵中選出的一個特定候選鍵，用於識別資料表中的記錄
- 每個資料表只能有一個主鍵
- 主鍵是候選鍵的子集

## 數量差異

- 候選鍵：一個資料表可以有多個候選鍵
- 主鍵：一個資料表只能有一個主鍵

## 選擇關係

- 主鍵必須是候選鍵之一
- 候選鍵可能是主鍵，也可能不是（未被選為主鍵的候選鍵稱為**替代鍵或次要鍵**）

## 實務應用差異

**主鍵**：
- 用於建立資料表之間的關係（外鍵參照）
- 通常會自動創建索引以提高查詢效能
- 在物理資料庫中明確宣告並強制執行

**候選鍵**：
- 是概念上的存在，識別潛在的唯一識別屬性
- 在實際資料庫中可以通過唯一性約束(UNIQUE constraint)來實現
- 不一定在所有資料庫系統中明確宣告

## 範例說明

考慮一個學生資料表：

| 學號 | 身分證號碼 | 電子郵件 | 姓名 | 系所 |
|------|------------|----------|------|------|
| S001 | A123456789 | s001@school.edu | 張三 | 資工系 |
| S002 | B987654321 | s002@school.edu | 李四 | 資管系 |

在此例中：
- 候選鍵有三個：學號、身分證號碼、電子郵件（假設都是唯一的）
- 資料庫設計者選擇「學號」作為主鍵
- 身分證號碼和電子郵件成為替代鍵，可以使用UNIQUE約束來確保它們的唯一性

## 資料庫中的實現

```sql
CREATE TABLE Students (
    學號 VARCHAR(10) PRIMARY KEY,  -- 主鍵宣告
    身分證號碼 VARCHAR(10) UNIQUE,  -- 候選鍵實現為唯一性約束
    電子郵件 VARCHAR(50) UNIQUE,   -- 候選鍵實現為唯一性約束
    姓名 VARCHAR(50) NOT NULL,
    系所 VARCHAR(20)
);
```

總結來說，主鍵是從候選鍵中選出的一個特定鍵，用於在實際資料庫設計中作為記錄的唯一識別符。候選鍵是更廣泛的概念，表示所有可能用於唯一識別記錄的屬性或屬性組合。